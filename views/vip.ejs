<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIP Membership - FreshMart</title>
    <link rel="stylesheet" href="/css/style.css">
    <style>
        .vip-container {
            max-width: 960px;
            margin: 40px auto;
            padding: 0 20px;
        }
        .vip-card {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: #fff;
            padding: 32px 28px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            margin-bottom: 24px;
        }
        .vip-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 999px;
            background: rgba(0, 0, 0, 0.15);
            font-size: 13px;
            font-weight: 600;
            letter-spacing: 0.03em;
            text-transform: uppercase;
        }
        .vip-title {
            font-size: 28px;
            margin: 14px 0 8px;
        }
        .vip-subtitle {
            font-size: 15px;
            opacity: 0.95;
        }
        .vip-layout {
            display: grid;
            grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
            gap: 20px;
            margin-top: 24px;
        }
        .vip-panel {
            background: #fff;
            border-radius: 14px;
            padding: 22px 20px;
            box-shadow: 0 4px 14px rgba(15, 23, 42, 0.08);
        }
        .vip-panel h2 {
            font-size: 18px;
            margin: 0 0 12px;
        }
        .vip-panel p {
            margin: 4px 0;
            font-size: 14px;
            color: #4b5563;
        }
        .vip-benefits li {
            margin: 4px 0;
            font-size: 14px;
            color: #374151;
        }
        .vip-status-chip {
            display: inline-flex;
            align-items: center;
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 13px;
            font-weight: 600;
        }
        .vip-status-active {
            background: rgba(16, 185, 129, 0.12);
            color: #047857;
        }
        .vip-status-inactive {
            background: #f3f4f6;
            color: #4b5563;
        }
        .vip-paypal-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 999px;
            padding: 10px 22px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            background: #003087;
            color: #fff;
        }
        .vip-paypal-btn:hover {
            background: #082f49;
        }
        .vip-note {
            font-size: 12px;
            color: #6b7280;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <%- include('partials/navbar', { user: user, currentPage: 'vip' }) %>

    <div class="vip-container">
        <% if (messages && messages.error) { %>
            <div class="alert alert-error" style="margin-bottom: 18px;">
                <%= Array.isArray(messages.error) ? messages.error[0] : messages.error %>
            </div>
        <% } %>
        <% if (messages && messages.success) { %>
            <div class="alert alert-success" style="margin-bottom: 18px;">
                <%= Array.isArray(messages.success) ? messages.success[0] : messages.success %>
            </div>
        <% } %>

        <div class="vip-card">
            <div class="vip-badge">
                VIP Membership
            </div>
            <% if (vipInfo && vipInfo.isVip) { %>
                <h1 class="vip-title">You are a VIP member</h1>
                <p class="vip-subtitle">
                    Free shipping is active for all your orders while your VIP remains valid.
                </p>
            <% } else { %>
                <h1 class="vip-title">Unlock VIP free shipping</h1>
                <p class="vip-subtitle">
                    Subscribe to VIP to enjoy free shipping on every order and priority support.
                </p>
            <% } %>
        </div>

        <div class="vip-layout">
            <div class="vip-panel">
                <h2>Status</h2>
                <% if (vipInfo && vipInfo.isVip) { %>
                    <p>
                        <span class="vip-status-chip vip-status-active">
                            Active VIP
                        </span>
                    </p>
                    <% if (vipInfo.expiresAtFormatted) { %>
                        <p>Expires at: <strong><%= vipInfo.expiresAtFormatted %></strong></p>
                    <% } %>
                    <% if (typeof vipInfo.daysLeft === 'number') { %>
                        <p>Remaining days: <strong><%= vipInfo.daysLeft >= 0 ? vipInfo.daysLeft : 0 %></strong></p>
                    <% } %>
                    <% if (vipInfo.subscriptionId) { %>
                        <p>PayPal Subscription ID: <code><%= vipInfo.subscriptionId %></code></p>
                    <% } %>
                <% } else { %>
                    <p>
                        <span class="vip-status-chip vip-status-inactive">
                            Not VIP
                        </span>
                    </p>
                    <% if (vipInfo && vipInfo.expiresAtFormatted && !vipInfo.isVip) { %>
                        <p>Previous VIP expired at: <strong><%= vipInfo.expiresAtFormatted %></strong></p>
                    <% } %>
                    <p>You can start a PayPal subscription to upgrade to VIP.</p>
                <% } %>
            </div>

            <div class="vip-panel">
                <h2>Upgrade vip</h2>
                <p>VIP uses PayPal subscription and does not consume your wallet balance.</p>
                <form action="/paypal/vip/start" method="POST" style="margin-top: 14px;">
                    <button type="submit" class="vip-paypal-btn">
                        Subscribe with PayPal
                    </button>
                </form>
                <p class="vip-note">
                    After successful subscription, you will be redirected back here and VIP free shipping
                    will be applied automatically when placing orders.
                </p>
            </div>
        </div>

        
    </div>

    <%- include('partials/footer', { user: user }) %>
    <script src="/js/main.js"></script>
</body>
</html>

